<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Flight Management</title>
    <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="mb-4">Flight Management</h1>
            <div>
                <a type="button" href="{{ url_for('admin.admin_users') }}" class="btn btn-primary" data-mdb-ripple-init>Go to User Management</a>
                <a type="button" href="{{ url_for('main.login') }}" class="btn btn-secondary" data-mdb-ripple-init>Logout</a>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                Add New Flight
            </div>
            <div class="card-body">
                <form action="{{ url_for('admin.add_flight') }}" method="POST">
                    <div class="row">
                        <div class="col-md-2 mb-3">
                            <input type="text" class="form-control" name="flight_id" placeholder="Flight ID" required>
                        </div>
                        <div class="col-md-3 mb-3">
                            <input type="text" class="form-control" name="origin" placeholder="Origin" required>
                        </div>
                        <div class="col-md-3 mb-3">
                            <input type="text" class="form-control" name="destination" placeholder="Destination" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <input type="number" class="form-control" name="airline_miles" placeholder="Airline Miles" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <input type="text" class="form-control" name="plane_model" placeholder="Plane Model" required>
                        </div>
                        <div class="col-md-2 mb-3">
                            <input type="number" step="0.01" class="form-control" name="price" placeholder="Price" required>
                        </div>
                        <div class="col-md-2 mb-3">
                            <input type="number" class="form-control" name="available_seats" placeholder="Seats" required>
                        </div>
                        <div class="col-md-4">
                            <button type="submit" class="btn btn-primary">Add Flight</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                Current Flights
            </div>
            <div class="card-body">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Origin</th>
                            <th>Destination</th>
                            <th>Airline Miles</th>
                            <th>Plane Model</th>
                            <th>Price</th>
                            <th>Seats</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for flight_id, flight in flights.items() %}
                        <tr>
                            <td>{{ flight_id }}</td>
                            <td>{{ flight.origin }}</td>
                            <td>{{ flight.destination }}</td>
                            <td>{{ flight.airline_miles }}</td>
                            <td>{{ flight.plane_model }}</td>
                            <td>$ {{ "%.2f"|format(flight.price) }}</td>
                            <td>{{ flight.available_seats }}</td>
                            <td>
                                <a href="{{ url_for('admin.delete_flight', flight_id=flight_id) }}" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this flight?');">
                                    Delete
                                </a>
                            </td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="8" class="text-center">No flights registered.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
</body>
</html>